ARM_TOOLS=$HOME/sdks/devkitARM/arm-none-eabi/bin
mkdir -p out && \
rustc --emit=ir game.rs -O -Z no-landing-pads --target arm-none-linux -o out/game.ll && \
llc -O3 -march=arm -mcpu=arm7tdmi out/game.ll && \
$ARM_TOOLS/as -o out/game.o out/game.s && \
$ARM_TOOLS/as -o out/crt0.o crt0.s && \
$ARM_TOOLS/ld -T linker.ld -o out/game.elf out/crt0.o out/game.o && \
$ARM_TOOLS/objcopy -O binary out/game.elf out/game.gba
